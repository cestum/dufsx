<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="icon" type="image/x-icon" href="__ASSETS_PREFIX__favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde@2.18.0/dist/easymde.min.css">
  <link rel="stylesheet" href="__ASSETS_PREFIX__index.css">
</head>

<body>

  <div class="main">
    <!-- IDE-like split layout -->
    <div class="ide-layout">
      <!-- Left panel: File tree -->
      <div class="file-tree-panel">
        <div class="file-tree-header">
          <h3>DufsX</h3>
          <div class="tree-actions">
            <div class="control new-file-tree" title="New File">
              <svg width="14" height="14" viewBox="0 0 16 16">
                <path d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z" />
                <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z" />
              </svg>
            </div>
            <div class="control new-folder-tree" title="New Folder">
              <svg width="14" height="14" viewBox="0 0 16 16">
                <path d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                <path d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
              </svg>
            </div>
            <div class="control refresh-tree" title="Refresh">
              <svg width="14" height="14" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
              </svg>
            </div>
            <a href="" class="control download hidden" title="Download file" download="">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <path
                  d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                <path
                  d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z" />
              </svg>
            </a>
            <div class="control move-file hidden" title="Move to new path">
              <svg class="icon-move" width="16" height="16" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                  d="M1.5 1.5A.5.5 0 0 0 1 2v4.8a2.5 2.5 0 0 0 2.5 2.5h9.793l-3.347 3.346a.5.5 0 0 0 .708.708l4.2-4.2a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 8.3H3.5A1.5 1.5 0 0 1 2 6.8V2a.5.5 0 0 0-.5-.5z">
                </path>
              </svg>
            </div>
            <div class="control delete-file hidden" title="Delete">
              <svg class="icon-delete" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path
                  d="M6.854 7.146a.5.5 0 1 0-.708.708L7.293 9l-1.147 1.146a.5.5 0 0 0 .708.708L8 9.707l1.146 1.147a.5.5 0 0 0 .708-.708L8.707 9l1.147-1.146a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146z" />
                <path
                  d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
              </svg>
            </div>
            <div class="control upload-file hidden" title="Upload files">
              <label for="file">
                <svg width="16" height="16" viewBox="0 0 16 16">
                  <path
                    d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                  <path
                    d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
                </svg>
              </label>
              <input type="file" id="file" title="Upload files" name="file" multiple>
            </div>
            <div class="control new-folder hidden" title="New folder">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <path
                  d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z" />
                <path
                  d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z" />
              </svg>
            </div>
            <div class="control new-file hidden" title="New File">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <path
                  d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z" />
                <path
                  d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z" />
              </svg>
            </div>
          </div>
        </div>
        <div class="file-tree-container">
          <div class="file-tree" id="file-tree"></div>
          <div class="empty-folder hidden">No files found</div>
        </div>
        <!-- Upload progress in tree panel -->
        <div class="upload-progress">
          <table class="uploaders-table hidden">
            <thead>
              <tr>
                <th class="cell-name">Uploading</th>
                <th class="cell-status">Progress</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="head">
          <div class="toolbox">
          </div>
          <form class="searchbar hidden">
            <div class="icon">
              <svg width="1em" height="1em" viewBox="0 0 16 16">
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
              </svg>
            </div>
            <input id="search" title="Searching for folders or files" name="q" type="text" maxlength="100" autocomplete="off"
              tabindex="1">
            <input type="submit" hidden />
          </form>
        </div>
      </div>

      <!-- Resizer -->
      <div class="resizer"></div>

      <!-- Right panel: Content viewer/editor -->
      <div class="content-panel">
        <div class="content-header">
          <div class="file-info">
            <div class="file-info-header">
                <div class="breadcrumb"></div>
                <span class="current-file-name">No file selected</span>
            </div>
            <span class="current-file-path"></span>
          </div>
          <div class="content-header-custom"></div>
          <div class="toolbox-right">
              <div class="content-header-buttons">
                  <div class="save-btn hidden" title="Save file">
                    <svg viewBox="0 0 1024 1024" width="24" height="24">
                      <path
                        d="M426.666667 682.666667v42.666666h170.666666v-42.666666h-170.666666z m-42.666667-85.333334h298.666667v128h42.666666V418.133333L605.866667 298.666667H298.666667v426.666666h42.666666v-128h42.666667z m260.266667-384L810.666667 379.733333V810.666667H213.333333V213.333333h430.933334zM341.333333 341.333333h85.333334v170.666667H341.333333V341.333333z"
                        p-id="8311"></path>
                    </svg>
                  </div>
              </div>
            <div class="login-btn hidden" title="Login">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                  d="M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z" />
                <path fill-rule="evenodd"
                  d="M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z" />
              </svg>
            </div>
            <div class="logout-btn hidden" title="Logout">
              <svg width="16" height="16" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0z"/>
                <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
              </svg>
              <span class="user-name"></span>
            </div>

          </div>

        </div>
        <div class="content-body">
          <!-- Welcome screen -->
          <div class="welcome-screen" id="welcome-screen">
            <div class="welcome-content">
              <h2>Welcome to Dufs File Explorer</h2>
              <p>Select a file from the explorer to view or edit its contents.</p>
              <div class="welcome-features">
                <div class="feature">
                  <svg width="24" height="24" viewBox="0 0 16 16">
                    <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1z"/>
                  </svg>
                  <h3>File Management</h3>
                  <p>Browse, create, and manage files and folders</p>
                </div>
                <div class="feature">
                  <svg width="24" height="24" viewBox="0 0 16 16">
                    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                  </svg>
                  <h3>Text Editing</h3>
                  <p>Edit text files with syntax highlighting</p>
                </div>
                <div class="feature">
                  <svg width="24" height="24" viewBox="0 0 16 16">
                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V9H9.5a.5.5 0 0 0-.5.5v4H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                    <path d="M11.5 10.5a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h2z"/>
                  </svg>
                  <h3>Markdown Support</h3>
                  <p>Enhanced markdown editing with live preview</p>
                </div>
              </div>
            </div>
          </div>

          <!-- File content area -->
          <div class="file-content hidden" id="file-content">
            <div class="not-editable hidden">Cannot edit because file is too large or binary.</div>

            <!-- Text/Code Editor -->
            <div class="editor-container hidden"></div>
            <div class="directory-container hidden"></div>
            <div class="empty-folder hidden"></div>
            <table class="uploaders-table hidden">
              <thead>
                <tr>
                  <th class="cell-name" colspan="2">Name</th>
                  <th class="cell-status">Progress</th>
                </tr>
              </thead>
            </table>
            <table class="paths-table hidden">
              <thead>
              </thead>
              <tbody>
              </tbody>
            </table>

            <textarea id="editor" class="editor hidden" aria-label="Editor" cols="10"></textarea>

            <!-- Markdown Editor -->
            <div id="markdown-editor-container" class="markdown-editor-container hidden"></div>

            <!-- Image Viewer -->
            <div class="image-viewer hidden" id="image-viewer">
              <div class="image-toolbar">
                <div class="image-controls">
                  <button class="image-btn" id="zoom-out" title="Zoom Out">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                      <path d="M4 6.5h6a.5.5 0 0 1 0 1H4a.5.5 0 0 1 0-1z"/>
                    </svg>
                  </button>
                  <span class="zoom-level">100%</span>
                  <button class="image-btn" id="zoom-in" title="Zoom In">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                      <path d="M7 4a.5.5 0 0 1 .5.5v2h2a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2h-2a.5.5 0 0 1 0-1h2v-2A.5.5 0 0 1 7 4z"/>
                    </svg>
                  </button>
                  <button class="image-btn" id="fit-to-screen" title="Fit to Screen">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>
                    </svg>
                  </button>
                  <button class="image-btn" id="actual-size" title="Actual Size">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M6.5 0A6.5 6.5 0 0 0 0 6.5C0 10.09 2.91 13 6.5 13S13 10.09 13 6.5A6.5 6.5 0 0 0 6.5 0zm0 12C3.46 12 1 9.54 1 6.5S3.46 1 6.5 1S12 3.46 12 6.5S9.54 12 6.5 12z"/>
                      <path d="M6.5 7a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1z"/>
                    </svg>
                  </button>
                </div>
                <div class="image-info">
                  <span class="image-dimensions"></span>
                  <span class="image-size"></span>
                </div>
              </div>
              <div class="image-container">
                <img id="image-display" alt="Image" draggable="false" />
              </div>
            </div>

            <!-- PDF Viewer -->
            <div class="pdf-viewer hidden" id="pdf-viewer">
              <div class="pdf-toolbar">
                <div class="pdf-controls">
                  <button class="pdf-btn" id="pdf-prev" title="Previous Page">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                    </svg>
                  </button>
                  <span class="pdf-page-info">
                    <input type="number" id="pdf-page-input" min="1" value="1" />
                    <span> / </span>
                    <span id="pdf-total-pages">1</span>
                  </span>
                  <button class="pdf-btn" id="pdf-next" title="Next Page">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
                    </svg>
                  </button>
                  <div class="pdf-divider"></div>
                  <button class="pdf-btn" id="pdf-zoom-out" title="Zoom Out">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                      <path d="M4 6.5h6a.5.5 0 0 1 0 1H4a.5.5 0 0 1 0-1z"/>
                    </svg>
                  </button>
                  <span class="pdf-zoom-level">100%</span>
                  <button class="pdf-btn" id="pdf-zoom-in" title="Zoom In">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                      <path d="M7 4a.5.5 0 0 1 .5.5v2h2a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2h-2a.5.5 0 0 1 0-1h2v-2A.5.5 0 0 1 7 4z"/>
                    </svg>
                  </button>
                </div>
                <div class="pdf-actions">
                  <button class="pdf-btn" id="pdf-fullscreen" title="Fullscreen">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>
                    </svg>
                  </button>
                  <a class="pdf-btn" id="pdf-download" title="Download PDF" download>
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                      <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                  </a>
                </div>
              </div>
              <div class="pdf-container">
                <iframe id="pdf-display" width="100%" height="100%"></iframe>
              </div>
            </div>

            <!-- Video Player -->
            <div class="video-viewer hidden" id="video-viewer">
              <div class="video-container">
                <video id="video-display" controls preload="metadata">
                  Your browser does not support the video tag.
                </video>
              </div>
            </div>

            <!-- Audio Player -->
            <div class="audio-viewer hidden" id="audio-viewer">
              <div class="audio-container">
                <div class="audio-info">
                  <h3 class="audio-title">Audio File</h3>
                  <div class="audio-metadata">
                    <span class="audio-duration"></span>
                    <span class="audio-filesize"></span>
                  </div>
                </div>
                <audio id="audio-display" controls preload="metadata">
                  Your browser does not support the audio tag.
                </audio>
              </div>
            </div>

            <!-- Generic Media Viewer (for other file types) -->
            <div class="media-viewer hidden" id="media-viewer">
              <div class="media-info">
                <div class="media-icon">
                  <svg width="64" height="64" viewBox="0 0 16 16">
                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                  </svg>
                </div>
                <h3 class="media-filename"></h3>
                <p class="media-description">This file type cannot be previewed in the browser.</p>
                <div class="media-actions">
                  <a class="btn btn-primary" id="media-download" download>
                    <svg width="16" height="16" viewBox="0 0 16 16">
                      <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                      <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                    Download File
                  </a>
                </div>
              </div>
            </div>

            <!-- Legacy iframe container for backwards compatibility -->
            <div class="iframe-container hidden" id="iframe-container"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Legacy index page (hidden by default in IDE mode) -->
    <div class="index-page hidden">
      <div class="empty-folder hidden"></div>
      <table class="uploaders-table hidden">
        <thead>
          <tr>
            <th class="cell-name" colspan="2">Name</th>
            <th class="cell-status">Progress</th>
          </tr>
        </thead>
      </table>
      <table class="paths-table hidden">
        <thead>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  <template id="index-data">__INDEX_DATA__</template>
  <script src="https://cdn.jsdelivr.net/npm/easymde@2.18.0/dist/easymde.min.js"></script>


  <!-- CodeMirror 6 -->
  <script defer="" src="__ASSETS_PREFIX__codemirror.js"></script>
  <script type="module">
  const {basicSetup} = CM["codemirror"];
  const {EditorView, keymap} = CM["@codemirror/view"];
  const {EditorState, Compartment} = CM["@codemirror/state"];

  // import { EditorState, basicSetup, Compartment } from 'https://cdn.skypack.dev/@codemirror/state';
  // import { EditorView, keymap, lineNumbers, highlightActiveLineGutter, highlightSpecialChars, drawSelection, dropCursor, rectangularSelection, crosshairCursor } from 'https://cdn.skypack.dev/@codemirror/view';
  // import { defaultKeymap, history, historyKeymap } from 'https://cdn.skypack.dev/@codemirror/commands';
  // import { searchKeymap, highlightSelectionMatches } from 'https://cdn.skypack.dev/@codemirror/search';
  // import { autocompletion, completionKeymap, closeBrackets, closeBracketsKeymap } from 'https://cdn.skypack.dev/@codemirror/autocomplete';
  // import { foldGutter, indentOnInput, bracketMatching, foldKeymap } from 'https://cdn.skypack.dev/@codemirror/language';
  const {python} = CM['@codemirror/lang-python'];
  const {javascript} = CM['@codemirror/lang-javascript'];
  const {html} = CM['@codemirror/lang-html'];
  const {css} = CM['@codemirror/lang-css'];
  const {cpp} = CM['@codemirror/lang-cpp'];
  const {java} = CM['@codemirror/lang-java'];
  const {rust} = CM['@codemirror/lang-rust'];
  const {json} = CM['@codemirror/lang-json'];
  // const {go} = CM['@codemirror/lang-go'];
  const {php} = CM['@codemirror/lang-php'];
  const {xml} = CM['@codemirror/lang-xml'];
  // const {yaml} = CM['@codemirror/lang-yaml'];
  const {sql} = CM['@codemirror/lang-sql'];

  const {markdown} = CM['@codemirror/lang-markdown'];
  const {oneDark} = CM['@codemirror/theme-one-dark'];
  // import { oneDark } from '@codemirror/theme-one-dark';

  // Make CodeMirror modules available globally
  let languageCompartment =new Compartment;
  window.CodeMirror6 = {
    basicSetup,
    EditorView,
    EditorState,
    languageCompartment,
    // basicSetup,
    languages: {
      javascript,
      python,
      java,
      cpp,
      rust,
      // go,
      php,
      html,
      css,
      json,
      xml,
      sql,
      // yaml,
      markdown,
    },
    themes: {
      oneDark
    },
    // extensions: {
    //   lineNumbers,
    //   highlightActiveLineGutter,
    //   highlightSpecialChars,
    //   highlightSelectionMatches,
    //   history,
    //   foldGutter,
    //   drawSelection,
    //   dropCursor,
    //   search,
    //   indentOnInput,
    //   bracketMatching,
    //   rectangularSelection,
    //   closeBrackets,
    //   crosshairCursor,
    //   keymap,
    //   closeBracketsKeymap,
    //   defaultKeymap,
    //   searchKeymap,
    //   historyKeymap,
    //   foldKeymap,
    //   completionKeymap
    //   // autocompletion,
    //   // lintGutter
    // }
  };

  // Dispatch event when CodeMirror is ready
  window.dispatchEvent(new CustomEvent('codemirror-ready'));
</script>

  <script>
    // Wait for CodeMirror to be ready before loading main script
    let codeMirrorReady = false;

    window.addEventListener('codemirror-ready', () => {
      codeMirrorReady = true;
      console.log('CodeMirror 6 is ready');
    });

    // Add a short delay to ensure all modules are loaded
    setTimeout(() => {
      if (!codeMirrorReady) {
        console.warn('CodeMirror 6 not ready, falling back to basic editor');
      }
    }, 1000);
  </script>

  <script src="__ASSETS_PREFIX__index.js"></script>
</body>

</html>
